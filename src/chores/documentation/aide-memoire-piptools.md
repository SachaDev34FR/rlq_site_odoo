# Aide-mémoire Pip-Tools

`pip-tools` est un ensemble d'outils en ligne de commande pour vous aider à garder vos environnements Python propres et vos dépendances à jour. Il se base sur l'idée de maintenir un fichier `requirements.in` simple et de générer un fichier `requirements.txt` complet et verrouillé.

Les deux commandes principales sont `pip-compile` et `pip-sync`.

## Installation

Pour commencer, installez `pip-tools` dans votre environnement virtuel :

```bash
pip install pip-tools
```

## Workflow de Base

### 1. Créez votre fichier `requirements.in`

Ce fichier contient vos dépendances directes, de haut niveau. Vous n'avez pas besoin de spécifier les versions si vous ne le souhaitez pas.

**Exemple `requirements.in` :**
```
# Dépendances principales
flask
requests

# Outils de développement
pytest
```

### 2. Compilez avec `pip-compile`

Cette commande prend votre fichier `.in` et génère un fichier `.txt` avec toutes les dépendances (y compris les dépendances transitives) et leurs versions exactes.

```bash
pip-compile requirements.in
```

Cela créera un fichier `requirements.txt` qui ressemble à ceci :

```
#
# This file is autogenerated by pip-compile with Python 3.12
# by Sacha Torres on 2025-09-17
#
# via -r requirements.in
#
click==8.1.7
    # via flask
...
flask==3.0.0
    # via -r requirements.in
...
requests==2.31.0
    # via -r requirements.in
...
```

### 3. Synchronisez votre environnement avec `pip-sync`

`pip-sync` s'assure que votre environnement virtuel contient **exactement** les paquets listés dans `requirements.txt`. Il installera les paquets manquants et **désinstallera** ceux qui ne sont pas nécessaires.

```bash
pip-sync
```

## Commandes et Options Utiles

### Mettre à jour tous les paquets

Pour mettre à jour toutes les dépendances à leurs dernières versions compatibles :

```bash
pip-compile --upgrade
```

### Mettre à jour un paquet spécifique

Pour forcer la mise à jour d'un ou plusieurs paquets spécifiques :

```bash
pip-compile --upgrade-package requests --upgrade-package pytest
```

### Gérer plusieurs environnements (ex: dev, prod)

Vous pouvez avoir plusieurs fichiers `.in`. Par exemple, `base.in` pour la production et `dev.in` pour le développement qui inclut les dépendances de base.

**`dev.in`:**
```
-c base.txt  # Contraint les versions à celles de la prod
-r base.in   # Inclut les paquets de base
pytest
black
```

Compilez-le avec :
```bash
pip-compile dev.in > dev-requirements.txt
```

### Générer des hashes de sécurité

Pour une sécurité accrue, vous pouvez inclure des hashes pour chaque paquet.

```bash
pip-compile --generate-hashes
```

### Spécifier un fichier de sortie

Si vous ne voulez pas utiliser le nom par défaut `requirements.txt` :

```bash
pip-compile requirements.in -o custom-reqs.txt
```

---
Ce workflow garantit des environnements reproductibles et facilite la gestion des dépendances de vos projets Python.
